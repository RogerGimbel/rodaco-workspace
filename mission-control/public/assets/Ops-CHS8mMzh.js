var q=s=>{throw TypeError(s)};var F=(s,r,o)=>r.has(s)||q("Cannot "+o);var u=(s,r,o)=>(F(s,r,"read from private field"),o?o.call(s):r.get(s)),L=(s,r,o)=>r.has(s)?q("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(s):r.set(s,o),k=(s,r,o,n)=>(F(s,r,"write to private field"),n?n.call(s,o):r.set(s,o),o),E=(s,r,o)=>(F(s,r,"access private method"),o);import{c as Z,S as ie,s as le,h as z,g as ce,n as ee,u as se,r as j,a as de,b as xe,j as e,G as b,d as ue,e as N,C as A,E as M,f as B,X as he,i as P,k as H,M as te,l as me,m as ge,o as pe,p as fe,q as je,t as Ne,P as ve,T as ye,v as I,w as O,x as R,y as re,z as _}from"./index-DeB3MFIT.js";import{L as be}from"./lightbulb-CXlmO2xT.js";import{C as we}from"./chevron-right-8zzJg8qE.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=Z("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=Z("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);var v,S,f,y,w,$,U,J,Oe=(J=class extends ie{constructor(r,o){super();L(this,w);L(this,v);L(this,S);L(this,f);L(this,y);k(this,v,r),this.setOptions(o),this.bindMethods(),E(this,w,$).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var n;const o=this.options;this.options=u(this,v).defaultMutationOptions(r),le(this.options,o)||u(this,v).getMutationCache().notify({type:"observerOptionsUpdated",mutation:u(this,f),observer:this}),o!=null&&o.mutationKey&&this.options.mutationKey&&z(o.mutationKey)!==z(this.options.mutationKey)?this.reset():((n=u(this,f))==null?void 0:n.state.status)==="pending"&&u(this,f).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=u(this,f))==null||r.removeObserver(this)}onMutationUpdate(r){E(this,w,$).call(this),E(this,w,U).call(this,r)}getCurrentResult(){return u(this,S)}reset(){var r;(r=u(this,f))==null||r.removeObserver(this),k(this,f,void 0),E(this,w,$).call(this),E(this,w,U).call(this)}mutate(r,o){var n;return k(this,y,o),(n=u(this,f))==null||n.removeObserver(this),k(this,f,u(this,v).getMutationCache().build(u(this,v),this.options)),u(this,f).addObserver(this),u(this,f).execute(r)}},v=new WeakMap,S=new WeakMap,f=new WeakMap,y=new WeakMap,w=new WeakSet,$=function(){var o;const r=((o=u(this,f))==null?void 0:o.state)??ce();k(this,S,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},U=function(r){ee.batch(()=>{var o,n,t,i,d,x,h,l;if(u(this,y)&&this.hasListeners()){const a=u(this,S).variables,c=u(this,S).context,m={client:u(this,v),meta:this.options.meta,mutationKey:this.options.mutationKey};if((r==null?void 0:r.type)==="success"){try{(n=(o=u(this,y)).onSuccess)==null||n.call(o,r.data,a,c,m)}catch(p){Promise.reject(p)}try{(i=(t=u(this,y)).onSettled)==null||i.call(t,r.data,null,a,c,m)}catch(p){Promise.reject(p)}}else if((r==null?void 0:r.type)==="error"){try{(x=(d=u(this,y)).onError)==null||x.call(d,r.error,a,c,m)}catch(p){Promise.reject(p)}try{(l=(h=u(this,y)).onSettled)==null||l.call(h,void 0,r.error,a,c,m)}catch(p){Promise.reject(p)}}}this.listeners.forEach(a=>{a(u(this,S))})})},J);function Q(s,r){const o=se(),[n]=j.useState(()=>new Oe(o,s));j.useEffect(()=>{n.setOptions(s)},[n,s]);const t=j.useSyncExternalStore(j.useCallback(d=>n.subscribe(ee.batchCalls(d)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=j.useCallback((d,x)=>{n.mutate(d,x).catch(de)},[n]);if(t.error&&xe(n.options.throwOnError,[t.error]))throw t.error;return{...t,mutate:i,mutateAsync:t.mutate}}function Y({task:s,index:r}){var h;const[o,n]=j.useState(!1),t=((s==null?void 0:s.status)||"").toLowerCase(),i=t.includes("progress")||t==="active"?"bg-success text-white":t.includes("blocked")?"bg-destructive text-destructive-foreground":t.includes("pending")?"bg-warning text-white":t.includes("done")||t.includes("complete")?"bg-muted text-muted-foreground":"bg-primary text-primary-foreground",d=t.includes("progress")||t==="active"?"ok":t.includes("blocked")?"error":"warning",x=new Map;return(h=s==null?void 0:s.checklist)==null||h.forEach(l=>{const a=(l==null?void 0:l.section)||"General";x.has(a)||x.set(a,[]),x.get(a).push(l)}),e.jsxs(b,{staggerIndex:r,className:"cursor-pointer",onClick:()=>n(!o),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx(ue,{status:d}),e.jsx("span",{className:"text-sm text-foreground/90 truncate",children:(s==null?void 0:s.title)||"Untitled"}),e.jsx("span",{className:N("text-[10px] px-2 py-0.5 rounded-full shrink-0",i),children:(s==null?void 0:s.status)||"unknown"})]}),e.jsx(A,{className:N("w-4 h-4 text-muted-foreground transition-transform shrink-0",o&&"rotate-180")})]}),(s==null?void 0:s.nextStep)&&e.jsxs("p",{className:"text-xs text-success/70 mt-2",children:["â†’ ",s.nextStep]}),o&&e.jsxs("div",{className:"mt-4 space-y-3 border-t border-border pt-3",children:[(s==null?void 0:s.started)&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Started: ",s.started]}),(s==null?void 0:s.plan)&&s.plan.length>0&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"label-text",children:"Plan"}),s.plan.map((l,a)=>e.jsx("p",{className:"text-xs text-foreground/70 pl-1",children:l},a))]}),x.size>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"label-text",children:"Checklist"}),Array.from(x.entries()).map(([l,a])=>e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-muted-foreground uppercase tracking-wider mb-1",children:l}),a.map((c,m)=>e.jsxs("div",{className:"flex items-start gap-2 py-0.5",children:[e.jsx("span",{className:"text-xs shrink-0",children:c!=null&&c.done?"âœ…":"â¬œ"}),e.jsx("span",{className:"text-xs text-foreground/70",children:(c==null?void 0:c.text)||""})]},m))]},l))]})]})]})}function G(s){return s.replace(/```[\s\S]*?```/g,"").replace(/`([^`]+)`/g,"$1").replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").replace(/^#+\s*/gm,"").trim()}function Te({data:s}){var r,o;return e.jsxs("div",{className:"space-y-4",children:[(s==null?void 0:s.role)&&e.jsxs(b,{staggerIndex:0,children:[e.jsx("p",{className:"label-text mb-2",children:"Role"}),e.jsx("p",{className:"text-sm text-foreground/80",children:G(s.role)})]}),((s==null?void 0:s.projects)??[]).map((n,t)=>{const i=(n==null?void 0:n.items)||(n==null?void 0:n.tasks)||[];return e.jsxs(b,{staggerIndex:t+1,children:[e.jsx("p",{className:"text-sm font-medium text-foreground/90 mb-1",children:(n==null?void 0:n.name)||"Project"}),(n==null?void 0:n.description)&&e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:n.description}),i.map((d,x)=>e.jsx("p",{className:"text-sm text-foreground/70 py-0.5 pl-1",children:G(d)},x))]},(n==null?void 0:n.name)||t)}),((s==null?void 0:s.antiGoals)??[]).length>0&&e.jsxs(b,{staggerIndex:(((r=s==null?void 0:s.projects)==null?void 0:r.length)??0)+1,children:[e.jsx("p",{className:"label-text mb-2 text-error/60",children:"Anti-Goals"}),(s.antiGoals??[]).map((n,t)=>e.jsx("p",{className:"text-sm text-foreground/70 py-0.5",children:G(n)},t))]}),((s==null?void 0:s.overnightTasks)??[]).length>0&&e.jsxs(b,{staggerIndex:(((o=s==null?void 0:s.projects)==null?void 0:o.length)??0)+2,children:[e.jsx("p",{className:"label-text mb-2 text-purple/60",children:"Overnight Tasks"}),(s.overnightTasks??[]).map((n,t)=>e.jsx("p",{className:"text-sm text-foreground/70 py-0.5",children:G(n)},t))]})]})}function V({text:s}){const r=s.split(`
`);return e.jsx("div",{className:"space-y-1.5",children:r.map((o,n)=>{const t=o.trimStart();return t.startsWith("#### ")?e.jsx("p",{className:"text-xs font-bold text-foreground/70 mt-3 mb-1",children:t.slice(5)},n):t.startsWith("### ")?e.jsx("p",{className:"text-sm font-bold text-foreground/70 mt-3 mb-1",children:t.slice(4)},n):t.startsWith("## ")?e.jsx("p",{className:"text-sm font-bold text-foreground/80 mt-4 mb-1",children:t.slice(3)},n):t.startsWith("# ")?e.jsx("p",{className:"text-base font-bold text-foreground/90 mt-4 mb-1",children:t.slice(2)},n):t.startsWith("```")?null:t.startsWith("- ")||t.startsWith("* ")?e.jsxs("div",{className:"flex items-start gap-2 pl-2",children:[e.jsx("span",{className:"text-muted-foreground mt-0.5",children:"â€¢"}),e.jsx("span",{className:"text-sm text-foreground/60 leading-relaxed",children:e.jsx(X,{text:t.slice(2)})})]},n):t?e.jsx("p",{className:"text-sm text-foreground/60 leading-relaxed",children:e.jsx(X,{text:t})},n):e.jsx("div",{className:"h-1"},n)})})}function X({text:s}){const r=[],o=/(\*\*(.+?)\*\*|`([^`]+)`)/g;let n=0,t;for(;(t=o.exec(s))!==null;)t.index>n&&r.push(s.slice(n,t.index)),t[2]?r.push(e.jsx("strong",{className:"text-foreground/80 font-semibold",children:t[2]},t.index)):t[3]&&r.push(e.jsx("code",{className:"text-xs bg-muted/60 rounded px-1 py-0.5 font-mono text-info/70",children:t[3]},t.index)),n=t.index+t[0].length;return n<s.length&&r.push(s.slice(n)),e.jsx(e.Fragment,{children:r})}function Le(s){return s.split(/\s+/).filter(Boolean).length}function ke(s){if(!s)return"";try{return new Date(s+"T00:00:00").toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})}catch{return s}}function Ee({data:s,dateStr:r}){var h;const[o,n]=j.useState(new Set);if(!s||!((h=s.sections)!=null&&h.length)&&!Object.keys(s).some(l=>typeof s[l]=="string"&&l!=="date"))return e.jsxs("div",{className:"glass-card p-8 flex flex-col items-center justify-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-muted/40 flex items-center justify-center",children:e.jsx("span",{className:"text-foreground/20 text-lg",children:"ðŸŒ™"})}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"No overnight activity recorded for this date"})]});const t=l=>n(a=>{const c=new Set(a);return c.has(l)?c.delete(l):c.add(l),c}),i=(s.sections??[]).reduce((l,a)=>l+Le(a.content??""),0),d=ke(s.date??r);if(s.sections&&s.sections.length>0)return e.jsxs("div",{className:"space-y-3",children:[(i>0||d)&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:[i>0&&e.jsxs("span",{children:[i.toLocaleString()," words"]}),i>0&&d&&e.jsx("span",{children:" Â· "}),d&&e.jsx("span",{children:d})]}),s.sections.map((l,a)=>{const c=o.has(a);return e.jsxs(b,{staggerIndex:a,className:"!p-0 overflow-hidden",children:[e.jsxs("button",{onClick:()=>t(a),className:"flex items-center justify-between w-full px-5 py-3.5 hover:bg-muted/30 transition-colors",children:[e.jsx("p",{className:"text-sm font-medium text-foreground/80 text-left",children:(l==null?void 0:l.title)??`Section ${a+1}`}),e.jsx(A,{className:N("w-4 h-4 text-muted-foreground transition-transform shrink-0",!c&&"rotate-180")})]}),!c&&(l==null?void 0:l.content)&&e.jsx("div",{className:"px-5 pb-4 border-t border-border pt-3",children:e.jsx(V,{text:l.content})})]},a)})]});const x=Object.entries(s).filter(([l,a])=>typeof a=="string"&&l!=="date");return e.jsx("div",{className:"space-y-3",children:x.map(([l,a],c)=>e.jsxs(b,{staggerIndex:c,children:[e.jsx("p",{className:"text-sm font-medium text-foreground/70 mb-2 capitalize",children:l}),e.jsx(V,{text:a})]},l))})}const De={high:"bg-error/15 text-error",medium:"bg-warning/15 text-warning",low:"bg-success/15 text-success"},Ie={small:"bg-success/10 text-success/70",medium:"bg-warning/10 text-warning/70",large:"bg-error/10 text-error/70"},Re={infrastructure:"bg-info/10 text-info/70",project:"bg-purple/10 text-purple/70",research:"bg-warning/10 text-warning/70"};function W({task:s,index:r}){const[o,n]=j.useState(!1),t=se(),i=Q({mutationFn:()=>H(`suggested-tasks/${s.id}/approve`),onSuccess:()=>{t.invalidateQueries({queryKey:["suggested-tasks"]}),P.success("Task approved",{duration:3e3})},onError:()=>P.warning("Failed to approve task")}),d=Q({mutationFn:()=>H(`suggested-tasks/${s.id}/reject`),onSuccess:()=>{t.invalidateQueries({queryKey:["suggested-tasks"]}),P.success("Task dismissed",{duration:3e3})},onError:()=>P.warning("Failed to dismiss task")}),x=s.status==="approved",h=s.status==="rejected",l=!x&&!h,a=De[(s.priority??"").toLowerCase()]??"bg-muted/60 text-muted-foreground",c=Ie[(s.effort??"").toLowerCase()]??"bg-muted/60 text-muted-foreground",m=Re[(s.category??"").toLowerCase()]??"bg-muted/60 text-muted-foreground";return e.jsxs(b,{staggerIndex:r,className:N("!p-0 overflow-hidden transition-opacity duration-300",h&&"opacity-50"),children:[e.jsxs("button",{onClick:()=>n(!o),className:"w-full px-4 py-3.5 flex items-start gap-3 text-left hover:bg-muted/30 transition-colors",children:[x&&e.jsx(B,{className:"w-4 h-4 text-success mt-0.5 shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:N("text-sm font-medium text-foreground/85",h&&"line-through text-muted-foreground"),children:s.title}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-2",children:[s.priority&&e.jsx("span",{className:N("text-[10px] px-2 py-0.5 rounded-full capitalize font-medium",a),children:s.priority}),s.effort&&e.jsx("span",{className:N("text-[10px] px-2 py-0.5 rounded-full capitalize font-medium",c),children:s.effort}),s.category&&e.jsx("span",{className:N("text-[10px] px-2 py-0.5 rounded-full capitalize font-medium",m),children:s.category})]})]}),e.jsx(A,{className:N("w-4 h-4 text-muted-foreground transition-transform shrink-0 mt-1",o&&"rotate-180")})]}),o&&e.jsxs("div",{className:"px-4 pb-4 border-t border-border pt-3 space-y-3",children:[s.reasoning&&e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed italic",children:s.reasoning}),l&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>i.mutate(),disabled:i.isPending,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs rounded-lg bg-success/15 text-success hover:bg-success/25 transition-colors disabled:opacity-50",children:[e.jsx(B,{className:"w-3 h-3"})," ",i.isPending?"Approvingâ€¦":"Approve"]}),e.jsxs("button",{onClick:()=>d.mutate(),disabled:d.isPending,className:"flex items-center gap-1.5 px-3 py-1.5 text-xs rounded-lg bg-error/15 text-error hover:bg-error/25 transition-colors disabled:opacity-50",children:[e.jsx(he,{className:"w-3 h-3"})," ",d.isPending?"Dismissingâ€¦":"Dismiss"]})]})]})]})}function Me({tasks:s}){const r=s.filter(t=>t.status!=="approved"&&t.status!=="rejected"),o=s.filter(t=>t.status==="approved"),n=s.filter(t=>t.status==="rejected");return s!=null&&s.length?e.jsxs("div",{className:"space-y-6",children:[r.length>0&&e.jsx("div",{className:"space-y-3",children:r.map((t,i)=>e.jsx(W,{task:t,index:i},t.id))}),o.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"label-text text-success",children:["Planned (",o.length,")"]}),o.map((t,i)=>e.jsx(W,{task:t,index:r.length+i},t.id))]}),n.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"label-text text-muted-foreground",children:["Dismissed (",n.length,")"]}),n.map((t,i)=>e.jsx(W,{task:t,index:r.length+o.length+i},t.id))]})]}):e.jsx(M,{message:"No suggested tasks â€” Rodaco will generate new ones during overnight builds",icon:e.jsx(be,{className:"w-5 h-5 text-warning/30"})})}const K=5,Pe={opus:"bg-purple-500/20 text-purple-300",sonnet:"bg-info/20 text-info",grok:"bg-warning/20 text-warning"};function Ge(s){return s.replace(/\*\*([^*]+)\*\*/g,"$1").replace(/\*([^*]+)\*/g,"$1").replace(/`([^`]+)`/g,"$1").replace(/^#+\s*/gm,"").trim()}function $e(s){return!!(s.duration!=null||s.modelUsed!=null||s.cost!=null||s.tasksCompleted!=null||s.summary||(s.highlights??[]).length>0)}function Ae({data:s}){var l;const[r,o]=j.useState(!1),[n,t]=j.useState(new Set),i=(s==null?void 0:s.builds)||[],d=r?i:i.slice(0,K),x=((l=s==null?void 0:s.stats)==null?void 0:l.totalTasks)??(s==null?void 0:s.totalBuilds)??i.length;if(!i.length)return e.jsxs("div",{className:"glass-card p-8 flex flex-col items-center justify-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-muted/40 flex items-center justify-center",children:e.jsx(te,{className:"w-5 h-5 text-muted-foreground"})}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"No overnight builds recorded yet"})]});const h=a=>t(c=>{const m=new Set(c);return m.has(a)?m.delete(a):m.add(a),m});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"label-text",children:"Overnight History"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[x," total tasks completed"]})]}),e.jsx("div",{className:"relative space-y-3 pl-4 border-l border-border",children:d.map((a,c)=>{if(!$e(a))return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-[21px] top-2.5 w-2.5 h-2.5 rounded-full bg-muted/80 border-2 border-[hsl(var(--background))]"}),e.jsxs("div",{className:"glass-card !py-2 !px-4 flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:(a==null?void 0:a.date)??"â€”"}),e.jsx("span",{className:"text-[11px] text-muted-foreground",children:"Build completed"})]})]},c);const p=n.has(c),g=a!=null&&a.summary?Ge(a.summary):"",T=g.length>150,C=(a==null?void 0:a.highlights)??[],ne=((a==null?void 0:a.modelUsed)??"").toLowerCase(),ae=Pe[ne]??"bg-muted/70 text-muted-foreground";return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-[21px] top-3 w-2.5 h-2.5 rounded-full bg-purple-400/60 border-2 border-[hsl(var(--background))]"}),e.jsxs(b,{staggerIndex:c,className:"cursor-pointer",onClick:()=>(T||C.length>0)&&h(c),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-foreground/80",children:(a==null?void 0:a.date)??"â€”"}),(a==null?void 0:a.duration)!=null&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-[10px] text-muted-foreground/60",children:"â€¢"}),e.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(me,{className:"w-3 h-3"})," ",a.duration]})]})]}),(a==null?void 0:a.cost)!=null&&e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-success/15 text-success",children:["$",Number(a.cost).toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center gap-4 mb-2",children:[(a==null?void 0:a.tasksCompleted)!=null&&e.jsxs("span",{className:"text-[11px] text-muted-foreground flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3 text-success/60"}),a.tasksCompleted," tasks"]}),(a==null?void 0:a.modelUsed)!=null&&e.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded-full font-medium ${ae}`,children:a.modelUsed})]}),g&&e.jsxs("p",{className:"text-xs text-foreground/55 leading-relaxed",children:[p||!T?g:`${g.slice(0,150)}â€¦`,T&&!C.length&&e.jsx("button",{onClick:D=>{D.stopPropagation(),h(c)},className:"ml-1 text-purple-400/70 hover:text-purple-400 transition-colors",children:p?"Show less":"Read more"})]}),C.length>0&&e.jsx(e.Fragment,{children:p?e.jsx("ul",{className:"mt-2 space-y-1 list-disc list-inside",children:C.map((D,oe)=>e.jsx("li",{className:"text-xs text-foreground/55",children:D},oe))}):e.jsxs("button",{onClick:D=>{D.stopPropagation(),h(c)},className:"mt-1 text-[11px] text-purple-400/70 hover:text-purple-400 transition-colors",children:[C.length," highlight",C.length>1?"s":""," â€” show"]})})]})]},c)})}),i.length>K&&!r&&e.jsxs("button",{onClick:()=>o(!0),className:"w-full glass-card py-2.5 text-xs text-muted-foreground hover:text-foreground/70 transition-colors flex items-center justify-center gap-1",children:[e.jsx(A,{className:"w-3.5 h-3.5"}),"Show ",i.length-K," older builds"]})]})}function Fe({tasks:s}){const r=s.filter(t=>!_(t)),o=s.filter(t=>_(t)),n=r.length<=2&&o.length===0;return e.jsxs("div",{className:"space-y-6",children:[r.length>0?e.jsxs("div",{className:"space-y-3",children:[r.map((t,i)=>e.jsx(Y,{task:t,index:i},t.title||i)),n&&e.jsx("p",{className:"text-center text-xs text-muted-foreground/50 pt-4 pb-2",children:"Looking good â€” queue is light"})]}):e.jsx(M,{message:"All tasks completed",icon:e.jsx(re,{className:"w-5 h-5 text-muted-foreground/40"})}),o.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"label-text text-muted-foreground",children:"Completed"}),e.jsx("div",{className:"space-y-3 opacity-50",children:o.map((t,i)=>e.jsx(Y,{task:t,index:r.length+i},t.title||i))})]})]})}function qe(){var c,m,p;const[s,r]=j.useState("Tasks"),[o,n]=j.useState(()=>new Date().toISOString().slice(0,10)),t=ge(),i=pe(),d=fe(o),x=je(),h=Ne(),l=((c=x.data)==null?void 0:c.tasks)||[],a=l.filter(g=>g.status!=="approved"&&g.status!=="rejected").length;return e.jsxs(e.Fragment,{children:[e.jsx(ve,{title:"Ops",subtitle:"Tasks, goals, and overnight operations",breadcrumb:s.startsWith("Suggested")?"Suggested":s,onBreadcrumbRoot:()=>r("Tasks")}),e.jsx(ye,{tabs:["Tasks","Goals","Overnight",`Suggested${a>0?` (${a})`:""}`],active:s,onChange:r,className:"mb-8"}),s==="Tasks"&&e.jsx(I,{label:"Tasks",children:e.jsx("div",{className:"space-y-3",children:t.isLoading?e.jsxs(e.Fragment,{children:[e.jsx(O,{lines:3}),e.jsx(O,{lines:3})]}):t.isError?e.jsx(R,{label:"active tasks",onRetry:()=>t.refetch()}):(p=(m=t.data)==null?void 0:m.tasks)!=null&&p.length?e.jsx(Fe,{tasks:t.data.tasks}):e.jsx(M,{message:"No active tasks",icon:e.jsx(re,{className:"w-5 h-5 text-muted-foreground/40"})})})}),s==="Goals"&&e.jsx(I,{label:"Goals",children:i.isLoading?e.jsx(O,{lines:6}):i.isError?e.jsx(R,{label:"goals",onRetry:()=>i.refetch()}):i.data?e.jsx(Te,{data:i.data}):e.jsx(M,{message:"No goals defined yet",icon:e.jsx(Se,{className:"w-5 h-5 text-muted-foreground/40"})})}),s==="Overnight"&&e.jsx(I,{label:"Overnight",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"label-text text-muted-foreground",children:"View overnight log for:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{const g=new Date(o+"T00:00:00");g.setDate(g.getDate()-1),n(g.toISOString().slice(0,10))},className:"glass-card-hover !p-2 text-muted-foreground hover:text-foreground transition-colors","aria-label":"Previous day",children:e.jsx(Ce,{className:"w-4 h-4"})}),e.jsx("input",{type:"date",value:o,onChange:g=>n(g.target.value),className:"glass-card px-4 py-2 text-sm text-foreground/70 bg-transparent outline-none flex-1 text-center"}),e.jsx("button",{onClick:()=>{const g=new Date(o+"T00:00:00");g.setDate(g.getDate()+1);const T=g.toISOString().slice(0,10),C=new Date().toISOString().slice(0,10);T<=C&&n(T)},className:"glass-card-hover !p-2 text-muted-foreground hover:text-foreground transition-colors","aria-label":"Next day",children:e.jsx(we,{className:"w-4 h-4"})})]})]}),d.isLoading?e.jsx(O,{lines:4}):d.isError?e.jsx(R,{label:"overnight log",onRetry:()=>d.refetch()}):e.jsx(Ee,{data:d.data,dateStr:o}),e.jsx(I,{label:"Overnight History",children:h.isLoading?e.jsx(O,{lines:4}):h.isError?e.jsx(R,{label:"overnight history",onRetry:()=>h.refetch()}):h.data?e.jsx(Ae,{data:h.data}):e.jsx(M,{message:"No overnight builds recorded yet",icon:e.jsx(te,{className:"w-5 h-5 text-foreground/15"})})})]})}),s.startsWith("Suggested")&&e.jsx(I,{label:"Suggested Tasks",children:x.isLoading?e.jsxs(e.Fragment,{children:[e.jsx(O,{lines:3}),e.jsx(O,{lines:3})]}):x.isError?e.jsx(R,{label:"suggested tasks",onRetry:()=>x.refetch()}):e.jsx(Me,{tasks:l})})]})}export{qe as default};
