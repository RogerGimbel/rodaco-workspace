import{c as f,r as b,j as e,G as d,e as u,U as _,f as V,V as I,C as L,Y as D,B as $,Z,E as M,_ as J,w as N,x as P,$ as Y,v as S,a0 as K,a1 as Q,a2 as X,a3 as ee,P as se,T as B,Q as te,a4 as T}from"./index-rVC220yM.js";import{U as ne}from"./user-BQpbnhF1.js";import{L as E}from"./lightbulb-DZIJqgcR.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=f("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=f("Anchor",[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=f("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=f("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=f("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oe=f("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=f("FileDown",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=f("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=f("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=f("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=f("Presentation",[["path",{d:"M2 3h20",key:"91anmk"}],["path",{d:"M21 3v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V3",key:"2k9sn8"}],["path",{d:"m7 21 5-5 5 5",key:"bip4we"}]]);function de(s){return typeof s=="string"?{name:s}:s}function k(s){if(!s)return"";const r=s.match(/\.(\w+)$/);return r?r[1].toLowerCase():""}function he(s){const r=k(s);return["png","jpg","jpeg","gif","webp","svg"].includes(r)?U:r==="pdf"?W:r==="html"?me:I}const pe={live:"bg-success/15 text-success",active:"bg-success/15 text-success",pending:"bg-warning/15 text-warning",submitted:"bg-info/15 text-info","in-progress":"bg-warning/15 text-warning",rejected:"bg-error/15 text-error"};function F(s){const r=(s??"").toLowerCase();return pe[r]??"bg-muted/60 text-muted-foreground"}function ue({data:s}){var v,A;const r=((v=s==null?void 0:s.credits)==null?void 0:v.used)??0,l=((A=s==null?void 0:s.credits)==null?void 0:A.total)??0,m=l>0?r/l*100:0,[x,i]=b.useState(!1),[c,p]=b.useState(!1),t=((s==null?void 0:s.marketingAssets)??[]).map(de),o=t.filter(n=>["png","jpg","jpeg","gif","webp","svg"].includes(k(n.name))).length,h=t.filter(n=>["md","txt","doc","docx"].includes(k(n.name))).length,a=t.filter(n=>k(n.name)==="pdf").length,y=t.length-o-h-a,j=((s==null?void 0:s.appStoreStatus)||(s==null?void 0:s.appStatus)||"unknown").toLowerCase(),w=((s==null?void 0:s.team)??[]).map(n=>(n??"").replace(/\*\*/g,"").trim()).filter(Boolean);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(d,{staggerIndex:0,className:"!p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("h2",{className:"text-lg font-bold text-foreground",children:(s==null?void 0:s.name)||"BeerPair"}),(s==null?void 0:s.status)&&e.jsx("span",{className:u("text-[10px] px-2.5 py-0.5 rounded-full capitalize font-medium",F(s.status)),children:s.status}),(s==null?void 0:s.url)&&e.jsxs("a",{href:s.url.startsWith("http")?s.url:`https://${s.url}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-xs text-info/70 hover:text-info transition-colors ml-auto",children:[s.url," ",e.jsx(ie,{className:"w-3 h-3"})]})]}),(s==null?void 0:s.description)&&e.jsx("p",{className:"text-sm text-muted-foreground mt-2 leading-relaxed",children:s.description})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs(d,{staggerIndex:1,className:"!p-4",children:[e.jsx("p",{className:"label-text mb-2",children:"Credits"}),e.jsxs("div",{className:"flex items-end gap-1.5",children:[e.jsx("span",{className:"text-xl font-bold text-foreground",children:r}),e.jsxs("span",{className:"text-sm text-muted-foreground mb-0.5",children:["/ ",l]})]}),e.jsx("div",{className:"mt-2 h-1.5 rounded-full bg-muted/60 overflow-hidden",children:e.jsx("div",{className:u("h-full rounded-full transition-all",m>80?"bg-error":"bg-success"),style:{width:`${Math.max(m,2)}%`}})})]}),e.jsxs(d,{staggerIndex:2,className:"!p-4",children:[e.jsx("p",{className:"label-text mb-2",children:"App Store"}),e.jsx("span",{className:u("inline-flex items-center text-xs px-2.5 py-1 rounded-full capitalize font-medium",F(j)),children:j})]}),e.jsxs(d,{staggerIndex:3,className:"!p-4",children:[e.jsx("p",{className:"label-text mb-2",children:"Assets"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-xl font-bold text-foreground",children:t.length})]})]})]}),((s==null?void 0:s.techStack)??[]).length>0&&e.jsxs(d,{staggerIndex:4,children:[e.jsx("p",{className:"label-text mb-3 text-info",children:"Tech Stack"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(s.techStack??[]).map((n,g)=>e.jsx("span",{className:"text-xs bg-info/10 text-info/70 rounded-full px-3 py-1 font-medium",children:n},g))})]}),((s==null?void 0:s.currentWork)??[]).length>0&&e.jsxs(d,{staggerIndex:5,children:[e.jsx("p",{className:"label-text mb-3 text-success",children:"Current Work"}),e.jsx("div",{className:"space-y-2",children:(s.currentWork??[]).map((n,g)=>{const C=(n==null?void 0:n.startsWith("âœ…"))||(n==null?void 0:n.startsWith("[x]")),O=(n==null?void 0:n.replace(/^(\[x\]|\[[ ]\]|âœ…|â¬œ)\s*/i,""))??"";return e.jsxs("div",{className:"flex items-start gap-2.5",children:[C?e.jsx(V,{className:"w-4 h-4 text-success/60 mt-0.5 shrink-0"}):e.jsx(q,{className:"w-4 h-4 text-muted-foreground mt-0.5 shrink-0"}),e.jsx("span",{className:u("text-sm",C?"text-muted-foreground line-through":"text-foreground/70"),children:O})]},g)})})]}),w.length>0&&e.jsxs(d,{staggerIndex:6,children:[e.jsx("p",{className:"label-text mb-3 text-purple",children:"Team"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:w.map((n,g)=>e.jsxs("span",{className:"flex items-center gap-1.5 text-xs bg-purple/10 text-purple/70 rounded-full px-3 py-1.5 font-medium",children:[e.jsx(ne,{className:"w-3 h-3"})," ",n]},g))})]}),e.jsxs(d,{staggerIndex:7,children:[e.jsxs("button",{onClick:()=>p(!c),className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("p",{className:"label-text",children:"Marketing Assets"}),e.jsxs("div",{className:"flex gap-2",children:[o>0&&e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-info/10 text-info/60 flex items-center gap-1",children:[e.jsx(U,{className:"w-2.5 h-2.5"})," ",o]}),h>0&&e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-success/10 text-success/60 flex items-center gap-1",children:[e.jsx(I,{className:"w-2.5 h-2.5"})," ",h]}),a>0&&e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-error/10 text-error/60 flex items-center gap-1",children:[e.jsx(W,{className:"w-2.5 h-2.5"})," ",a]}),y>0&&e.jsxs("span",{className:"text-[10px] px-2 py-0.5 rounded-full bg-muted/60 text-muted-foreground flex items-center gap-1",children:["+",y]})]})]}),e.jsx(L,{className:u("w-4 h-4 text-muted-foreground transition-transform",c&&"rotate-180")})]}),c&&e.jsx("div",{className:"mt-3 space-y-2 border-t border-border pt-3",children:t.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No marketing assets"}):t.map((n,g)=>{const C=k(n.name),O=["png","jpg","jpeg","gif","webp","svg"].includes(C),z=he(n.name);return e.jsxs("div",{className:"flex items-center gap-3 py-1.5",children:[O&&n.path?e.jsx("div",{className:"w-10 h-10 rounded-lg bg-muted/50 overflow-hidden shrink-0",children:e.jsx("img",{src:n.path,alt:n.name,className:"w-full h-full object-cover",onError:R=>{R.target.style.display="none"}})}):e.jsx("div",{className:"w-10 h-10 rounded-lg bg-muted/50 flex items-center justify-center shrink-0",children:e.jsx(z,{className:"w-4 h-4 text-muted-foreground"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-foreground/70 truncate",children:n.name||"Unknown"}),n.type&&e.jsx("p",{className:"text-[10px] text-muted-foreground",children:n.type})]}),n.path&&e.jsx("a",{href:n.path,target:"_blank",rel:"noopener noreferrer",className:"text-[10px] text-muted-foreground hover:text-foreground/60 transition-colors shrink-0",children:"View â†—"})]},g)})})]}),((s==null?void 0:s.history)??[]).length>0&&e.jsxs(d,{staggerIndex:8,children:[e.jsxs("button",{onClick:()=>i(!x),className:"flex items-center justify-between w-full",children:[e.jsxs("p",{className:"label-text text-warning",children:["History (",(s.history??[]).length,")"]}),e.jsx(L,{className:u("w-4 h-4 text-muted-foreground transition-transform",x&&"rotate-180")})]}),x&&e.jsx("div",{className:"mt-3 border-t border-border pt-3",children:e.jsx("div",{className:"relative pl-4 border-l border-border space-y-3",children:(s.history??[]).map((n,g)=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-[calc(1rem+4.5px)] top-1.5 w-2 h-2 rounded-full bg-warning/40"}),e.jsx("span",{className:"text-[10px] text-muted-foreground font-mono",children:(n==null?void 0:n.date)??"â€”"}),e.jsx("p",{className:"text-sm text-foreground/60",children:(n==null?void 0:n.event)??""})]},g))})})]}),((s==null?void 0:s.keyFiles)??[]).length>0&&e.jsxs(d,{staggerIndex:9,children:[e.jsx("p",{className:"label-text mb-3",children:"Key Files"}),e.jsx("div",{className:"space-y-1",children:(s.keyFiles??[]).map((n,g)=>e.jsxs("p",{className:"text-sm text-foreground/60 font-mono text-xs",children:["ðŸ“„ ",n]},g))})]})]})}function ge({data:s}){var x,i,c,p;const[r,l]=b.useState(!1),m=(((x=s.automationGoals)==null?void 0:x.length)??0)>0||(((i=s.seoFindings)==null?void 0:i.length)??0)>0||(((c=s.contentGaps)==null?void 0:c.length)??0)>0||(((p=s.expansionNotes)==null?void 0:p.length)??0)>0;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs(d,{staggerIndex:0,className:"!p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap mb-2",children:[e.jsx("h2",{className:"text-lg font-bold text-foreground",children:(s==null?void 0:s.name)||"Ocean One"}),(s==null?void 0:s.industry)&&e.jsxs("span",{className:"flex items-center gap-1 text-xs bg-info/10 rounded-full px-2.5 py-1 text-info/70 font-medium",children:[e.jsx(oe,{className:"w-3 h-3"})," ",s.industry]}),(s==null?void 0:s.location)&&e.jsxs("span",{className:"flex items-center gap-1 text-xs bg-muted/60 rounded-full px-2.5 py-1 text-muted-foreground",children:[e.jsx(xe,{className:"w-3 h-3"})," ",s.location]}),(s==null?void 0:s.status)&&e.jsx("span",{className:"text-[10px] px-2.5 py-0.5 rounded-full bg-success/15 text-success capitalize font-medium ml-auto",children:s.status})]}),(s==null?void 0:s.description)&&e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:s.description})]}),((s==null?void 0:s.services)??[]).length>0&&e.jsxs(d,{staggerIndex:1,children:[e.jsxs("p",{className:"label-text mb-3 flex items-center gap-1",children:[e.jsx(le,{className:"w-3 h-3"})," Services"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:((s==null?void 0:s.services)??[]).map((t,o)=>e.jsx("span",{className:"text-xs bg-info/10 text-info/70 rounded-full px-3 py-1 font-medium",children:t},o))})]}),((s==null?void 0:s.automationGoals)??[]).length>0&&e.jsxs(d,{staggerIndex:2,children:[e.jsxs("p",{className:"label-text mb-3 text-success flex items-center gap-1",children:[e.jsx(E,{className:"w-3 h-3"})," Automation Goals"]}),e.jsx("div",{className:"space-y-2",children:(s.automationGoals??[]).map((t,o)=>{const h=(t==null?void 0:t.startsWith("âœ…"))||(t==null?void 0:t.startsWith("[x]")),a=(t==null?void 0:t.replace(/^(\[x\]|\[[ ]\]|âœ…|â¬œ)\s*/i,""))??"";return e.jsxs("div",{className:"flex items-start gap-2.5",children:[h?e.jsx(V,{className:"w-4 h-4 text-success/60 mt-0.5 shrink-0"}):e.jsx(q,{className:"w-4 h-4 text-muted-foreground mt-0.5 shrink-0"}),e.jsx("span",{className:u("text-sm",h?"text-muted-foreground line-through":"text-foreground/70"),children:a})]},o)})})]}),((s==null?void 0:s.seoFindings)??[]).length>0&&e.jsxs(d,{staggerIndex:3,children:[e.jsxs("button",{onClick:()=>l(!r),className:"flex items-center justify-between w-full",children:[e.jsxs("p",{className:"label-text text-info flex items-center gap-1",children:[e.jsx(D,{className:"w-3 h-3"})," SEO Findings (",(s.seoFindings??[]).length,")"]}),e.jsx(L,{className:u("w-4 h-4 text-muted-foreground transition-transform",r&&"rotate-180")})]}),r&&e.jsx("div",{className:"mt-3 space-y-2 border-t border-border pt-3",children:(s.seoFindings??[]).map((t,o)=>e.jsxs("div",{className:"flex items-start gap-2.5 p-2.5 rounded-lg bg-muted/30",children:[e.jsx(D,{className:"w-3.5 h-3.5 text-info/50 mt-0.5 shrink-0"}),e.jsx("p",{className:"text-sm text-foreground/60",children:typeof t=="string"?t:JSON.stringify(t)})]},o))})]}),((s==null?void 0:s.contentGaps)??[]).length>0&&e.jsxs(d,{staggerIndex:4,children:[e.jsxs("p",{className:"label-text mb-3 text-warning flex items-center gap-1",children:[e.jsx($,{className:"w-3 h-3"})," Content Gaps"]}),e.jsx("div",{className:"space-y-2",children:(s.contentGaps??[]).map((t,o)=>e.jsxs("div",{className:"flex items-start gap-2.5",children:[e.jsx("span",{className:u("text-[9px] uppercase font-bold px-1.5 py-0.5 rounded mt-0.5 shrink-0",o===0?"bg-error/15 text-error":o<3?"bg-warning/15 text-warning":"bg-muted/60 text-muted-foreground"),children:o===0?"High":o<3?"Med":"Low"}),e.jsx("p",{className:"text-sm text-foreground/60",children:typeof t=="string"?t:JSON.stringify(t)})]},o))})]}),((s==null?void 0:s.conversations)??[]).length>0&&e.jsxs(d,{staggerIndex:5,children:[e.jsxs("p",{className:"label-text mb-3 flex items-center gap-1",children:[e.jsx(Z,{className:"w-3 h-3"})," Conversations (",((s==null?void 0:s.conversations)??[]).length,")"]}),e.jsx("div",{className:"relative pl-4 border-l border-border space-y-3",children:((s==null?void 0:s.conversations)??[]).map((t,o)=>e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute -left-[calc(1rem+4.5px)] top-1.5 w-2 h-2 rounded-full bg-info/40"}),e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground font-mono",children:(t==null?void 0:t.date)??"â€”"}),(t==null?void 0:t.messageCount)!=null&&e.jsxs("span",{className:"text-[10px] text-muted-foreground",children:[t.messageCount," msgs"]})]}),e.jsx("p",{className:"text-sm text-foreground/70",children:(t==null?void 0:t.topic)??"â€”"}),((t==null?void 0:t.keyPoints)??[]).length>0&&e.jsx("div",{className:"mt-1 space-y-0.5",children:((t==null?void 0:t.keyPoints)??[]).map((h,a)=>e.jsxs("p",{className:"text-xs text-muted-foreground",children:["â€¢ ",h]},a))})]},o))})]}),((s==null?void 0:s.expansionNotes)??[]).length>0&&e.jsxs(d,{staggerIndex:6,children:[e.jsx("p",{className:"label-text mb-3 text-purple",children:"Expansion Notes"}),e.jsx("div",{className:"space-y-1",children:(s.expansionNotes??[]).map((t,o)=>e.jsxs("p",{className:"text-sm text-foreground/60",children:["â€¢ ",typeof t=="string"?t:JSON.stringify(t)]},o))})]}),!m&&e.jsx(M,{message:"Basic project info only â€” expand with SEO audits, automation goals, and content strategy!",icon:e.jsx(E,{className:"w-5 h-5 text-warning/30"})})]})}const G={note:{icon:I,dot:"text-info",bg:"bg-info/10"},milestone:{icon:ae,dot:"text-success",bg:"bg-success/10"},session:{icon:Y,dot:"text-muted-foreground",bg:"bg-muted/10"}};function fe(s){if(!s)return"Unknown";const r=new Date(s);if(isNaN(r.getTime()))return"Unknown";const l=new Date;l.setHours(0,0,0,0);const m=new Date(l);m.setDate(m.getDate()-1);const x=new Date(r);return x.setHours(0,0,0,0),x.getTime()===l.getTime()?"Today":x.getTime()===m.getTime()?"Yesterday":r.toLocaleDateString("en-US",{month:"short",day:"numeric"})}function je(s){const r=new Map;for(const l of s){const m=fe((l==null?void 0:l.date)||(l==null?void 0:l.timestamp));r.has(m)||r.set(m,[]),r.get(m).push(l)}return Array.from(r.entries())}function Ne({projectId:s}){const{data:r,isLoading:l,isError:m,refetch:x}=J(s),i=r??{},c=Array.isArray(i==null?void 0:i.activities)?i.activities:[],p=(i==null?void 0:i.total)??c.length,t=b.useMemo(()=>je(c),[c]);return l?e.jsx(N,{lines:6}):m?e.jsx(P,{label:"project activity",onRetry:()=>x()}):c.length?e.jsxs("div",{className:"space-y-4",children:[p>c.length&&e.jsxs("p",{className:"text-[11px] text-muted-foreground",children:["Showing ",String(c.length)," of ",String(p)," activities"]}),t.map(([o,h])=>e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-muted-foreground/50 uppercase tracking-wider font-medium mb-2",children:o}),e.jsx("div",{className:"space-y-1",children:h.map((a,y)=>{const j=G[(a==null?void 0:a.type)||""]??G.session,w=j.icon;return e.jsx(S,{label:"Activity row",children:e.jsxs("div",{className:"flex items-start gap-2.5 py-2 px-2 rounded-lg hover:bg-muted/5 transition-colors",children:[e.jsx("div",{className:u("w-5 h-5 rounded-md flex items-center justify-center shrink-0 mt-0.5",j.bg),children:e.jsx(w,{className:u("w-3 h-3",j.dot)})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[(a==null?void 0:a.category)&&e.jsx("span",{className:"text-[10px] px-1.5 py-0.5 rounded bg-muted/10 text-muted-foreground mr-2",children:String(a.category)}),e.jsx("p",{className:"text-xs text-foreground/70 leading-snug mt-1 line-clamp-2",children:String((a==null?void 0:a.summary)||"â€”")}),e.jsx("p",{className:"text-[10px] text-muted-foreground/40 font-mono mt-0.5",children:a!=null&&a.date?String(a.date):a!=null&&a.timestamp?new Date(String(a.timestamp)).toLocaleDateString():"â€”"})]})]})},y)})})]},o))]}):e.jsx(M,{message:"No activity found for this project yet",icon:e.jsx(re,{className:"w-5 h-5 text-muted-foreground/30"})})}const H={accelerating:{emoji:"ðŸ“ˆ",cls:"bg-success/15 text-success border-success/20"},slowing:{emoji:"ðŸ“‰",cls:"bg-destructive/15 text-destructive border-destructive/20"},steady:{emoji:"â†’",cls:"bg-muted text-muted-foreground border-border"}};function be({values:s}){if(!s.length)return null;const r=Math.max(...s,1),l=Math.min(...s,0),m=r-l||1,x=28,i=64,c=s.map((p,t)=>{const o=t/Math.max(s.length-1,1)*i,h=x-(p-l)/m*(x-4)-2;return`${o},${h}`});return e.jsxs("svg",{width:i,height:x,className:"shrink-0",children:[e.jsx("polyline",{points:c.join(" "),fill:"none",stroke:"hsl(var(--primary))",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s.map((p,t)=>{const o=t/Math.max(s.length-1,1)*i,h=x-(p-l)/m*(x-4)-2;return e.jsx("circle",{cx:o,cy:h,r:"2.5",fill:"hsl(var(--primary))"},t)})]})}function ye({projectKey:s}){var j;const{data:r,isLoading:l,isError:m,refetch:x}=K(),i=r,c=(j=i==null?void 0:i.velocity)==null?void 0:j[s],t=String((i==null?void 0:i.mostActive)??"").toLowerCase()===s.toLowerCase(),o=b.useMemo(()=>c?[Number(c.week4??0),Number(c.week3??0),Number(c.week2??0),Number(c.week1??0)]:[],[c]),h=String((c==null?void 0:c.trend)??"steady").toLowerCase(),a=H[h]??H.steady,y=Number((c==null?void 0:c.week1)??0);return e.jsx(S,{label:"Project Velocity",children:l?e.jsx(N,{lines:2}):m?e.jsx(P,{label:"velocity data",onRetry:()=>x()}):c?e.jsxs(d,{className:"!p-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2.5 min-w-0",children:[t&&e.jsx(ce,{className:"w-4 h-4 text-warning shrink-0"}),e.jsx("h3",{className:"text-sm font-semibold text-foreground truncate",children:"Momentum"}),e.jsxs(Q,{variant:"outline",className:u("text-[10px] shrink-0",a.cls),children:[a.emoji," ",h]})]}),e.jsxs("span",{className:"text-xs text-muted-foreground tabular-nums shrink-0",children:[y," mentions this week"]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[e.jsx(be,{values:o}),e.jsx("div",{className:"flex gap-3 text-[10px] text-muted-foreground",children:o.map((w,v)=>e.jsxs("span",{className:"tabular-nums",children:["W",4-v,": ",w]},v))})]})]}):null})}function Se(){const[s,r]=b.useState("BeerPair"),[l,m]=b.useState("Dashboard"),x=X(),i=ee(),c=p=>{r(p),m("Dashboard")};return e.jsxs(e.Fragment,{children:[e.jsx(se,{title:"Projects",subtitle:"Project dashboards",breadcrumb:l==="Dashboard"?s:l,onBreadcrumbRoot:()=>{r("BeerPair"),m("Dashboard")}}),e.jsx(B,{tabs:["BeerPair","Ocean One"],active:s,onChange:c,className:"mb-4"}),e.jsx(B,{tabs:["Dashboard","Activity"],active:l,onChange:m,className:"mb-8"}),l==="Dashboard"&&e.jsxs(e.Fragment,{children:[(x.isLoading||i.isLoading)&&e.jsx(te,{label:"Projects"}),e.jsx(ye,{projectKey:s==="BeerPair"?"beerpair":"ocean-one"}),e.jsx("div",{className:"mt-4"}),s==="BeerPair"&&e.jsx(S,{label:"BeerPair Dashboard",children:x.isLoading?e.jsxs("div",{className:"space-y-4",children:[e.jsx(N,{lines:2}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(N,{className:"flex-1",lines:4}),e.jsx(N,{className:"flex-1",lines:4})]}),e.jsx(N,{lines:5})]}):x.isError?e.jsx(P,{label:"BeerPair data",onRetry:()=>x.refetch()}):x.data?e.jsx(ue,{data:x.data}):e.jsx(M,{message:"No BeerPair data available",icon:e.jsx(T,{className:"w-5 h-5 text-foreground/15"})})}),s==="Ocean One"&&e.jsx(S,{label:"Ocean One Dashboard",children:i.isLoading?e.jsxs("div",{className:"space-y-4",children:[e.jsx(N,{lines:2}),e.jsx(N,{lines:4})]}):i.isError?e.jsx(P,{label:"Ocean One data",onRetry:()=>i.refetch()}):i.data?e.jsx(ge,{data:i.data}):e.jsx(M,{message:"No Ocean One data available",icon:e.jsx(T,{className:"w-5 h-5 text-foreground/15"})})})]}),l==="Activity"&&e.jsx(S,{label:"Project Activity",children:e.jsx(Ne,{projectId:s==="BeerPair"?"beerpair":"ocean-one"})})]})}export{Se as default};
